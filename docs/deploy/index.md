# 部署指南

## 部署方式

Bunstuff 支持两种主要部署方式：

| 方式 | 适用场景 | 说明 |
|------|---------|------|
| [Docker 部署](./docker) | 生产环境推荐 | 一键部署，隔离性好 |
| [本地构建](./local) | 服务器直接运行 | 单文件部署 |

## 生产架构

```
┌─────────────────────────────────────┐
│           Nginx / 反向代理            │
│  *.example.com → localhost:3000     │
└──────────────────┬──────────────────┘
                   ↓
┌─────────────────────────────────────┐
│         Bunstuff 应用               │
│         Port: 3000                  │
│                                     │
│  /api/*         → API 接口          │
│  /_admin/*      → 管理端 SPA        │
│  /*             → 客户端 SPA        │
│  /uploads/*     → 文件资源          │
└──────────┬──────────────────────────┘
           ↓
┌─────────────────────────────────────┐
│         数据存储                     │
│                                     │
│  SQLite:    data/myapp.db           │
│  MySQL:     远程数据库               │
│  PostgreSQL:远程数据库               │
│  文件:      uploads/                │
└─────────────────────────────────────┘
```

## 端口

| 端口 | 用途 |
|------|------|
| 3000 | 应用服务端口 |

## 健康检查

```bash
curl http://localhost:3000/api/health
# { "status": "ok" }
```

## 数据持久化

| 数据 | 路径 | 说明 |
|------|------|------|
| 数据库 | `data/myapp.db` | SQLite 数据文件 |
| 上传文件 | `uploads/` | 用户上传的文件 |

::: warning 重要提示
在使用 SQLite 时，务必确保 `data/` 目录已持久化（Docker 卷或本地目录），否则容器重启会丢失数据。
:::
